<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>M&M's Sketchpad â€” Simple Drawing App</title>
  <link rel="stylesheet" href="apps/sketchpad/style.css" />
</head>
<body>
  <div class="app">
    <div id="stage">
      <h1 class="title">M&M's Sketchpad</h1>

      <div class="zoom-controls">
        <button id="zoomOut" title="Zoom out (Ctrl/âŒ˜ -)">âˆ’</button>
        <span id="zoomLevel">1.0x</span>
        <button id="zoomIn" title="Zoom in (Ctrl/âŒ˜ +)">+</button>
        <button id="resetView" title="Reset (Ctrl/âŒ˜ 0)">Reset</button>
        <button id="fitView" title="Fit to strokes">Fit</button>
        <button id="undoBtn" title="Undo last (Ctrl/âŒ˜+Z)">Undo</button>
        <button id="redoBtn" title="Redo (Ctrl/âŒ˜+Y or Shift+Ctrl/âŒ˜+Z)">Redo</button>
      </div>

      <canvas id="canvas"></canvas>

      <div class="primary-actions">
        <button class="save-btn" id="paletteBtn" title="Open colours (P or C)">ğŸ¨ Colours</button>
        <button class="save-btn" id="saveBtn" title="Save visible area as PNG">Save View</button>
        <button class="save-btn" id="saveFullBtn" title="Save entire drawing as PNG">Save Full</button>
        <button class="save-btn" id="exportBtn" title="Download strokes as JSON">Export</button>
        <button class="save-btn" id="importBtn" title="Import strokes from JSON">Import</button>
        <input type="file" id="importFile" accept="application/json" hidden />
      </div>

      <div class="navigator" id="navigator">
        <canvas id="navCanvas" width="360" height="240" aria-label="Navigator mini-map"></canvas>
        <div class="nav-controls">
          <button id="navToggle" title="Show/Hide (N)">ğŸ‘ Hide</button>
          <button id="navFit" title="Fit view">Fit</button>
        </div>
      </div>

      <div class="modal" id="paletteModal" aria-hidden="true">
        <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="paletteTitle">
          <header>
            <h2 id="paletteTitle">Colours & Brushes</h2>
            <button class="close" id="closePalette">Close</button>
          </header>

          <div class="content">
            <fieldset>
              <legend>Colour</legend>
              <div class="picker-section">
                <label for="colorPicker">Pick colour</label>
                <input id="colorPicker" type="color" value="#3a86ff" />
              </div>
              <div class="quick-colors">
                <h3>Quick picks</h3>
                <div class="quick-grid" id="quickGrid"></div>
              </div>
              <p class="hint">Tip: Tap any saved square below to set current colour. Long-press a square to overwrite it.</p>
              <div class="swatch-grid" id="swatchGrid"></div>
              <div class="grid-actions">
                <button id="addSwatch">Add current colour</button>
                <button id="clearSwatches" title="Remove all saved colours" style="color:#fff;background:#2a2d36;border:1px solid #3b3e4d">Clear colours</button>
                <button id="clearCanvasBtn" style="margin-left:auto;color:#fff;background:#8c2f2f;border:1px solid #a44747">ğŸ§¹ Clear drawing</button>
              </div>
            </fieldset>

            <fieldset>
              <legend>Brush</legend>
              <div class="brushes" id="brushes">
                <button data-brush="pencil">âœï¸ Pencil</button>
                <button data-brush="fine">ğŸ–Šï¸ Fine pen</button>
                <button data-brush="marker">ğŸ–ï¸ Marker</button>
                <button data-brush="highlighter">ğŸ–Œï¸ Highlighter</button>
                <button data-brush="eraser" style="grid-column: span 2; background:#221b1b; border-color:#3b2a2a">ğŸ§¼ Eraser</button>
              </div>
              <label for="size">Thickness</label>
              <input id="size" type="range" min="1" max="80" value="8" />
              <p class="hint">Brush sizes are scaled to your screenâ€™s pixel density so strokes look crisp.</p>
              <div class="import-export">
                <button id="exportFromModal">Export drawing (JSON)</button>
                <button id="importFromModal">Import drawing (JSON)</button>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
    </div>

    <div class="swatch-bar" id="swatchBar" aria-label="Saved colours"></div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script type="module" src="apps/sketchpad/main.js"></script>
</body>
</html>
